language: cpp
compiler:
  - gcc
env:
#  - BOOST_PPA=true
#  - BOOST_PPA=false
before_install:
  - |-
#    if [ "${BOOST_PPA}" != "false" ]; then
#      sudo add-apt-repository -y ppa:boost-latest/ppa
#    fi
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get update -qq
install:
  - sudo apt-get install -y -qq autoconf automake libtool make gcc-4.8 g++-4.8 libboost-all-dev libprotobuf-dev libcurl4-openssl-dev libzmq3-dev protobuf-compiler libsqlite3-dev lcov lua5.2 liblua5.2-dev
  - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 90
before_script:
  - echo "Boost $(dpkg -s libboost-dev | grep 'Version')"
script:
  ./autogen.sh && ./configure --enable-coverage && make test -j2
after_failure:
  - cat config.log
